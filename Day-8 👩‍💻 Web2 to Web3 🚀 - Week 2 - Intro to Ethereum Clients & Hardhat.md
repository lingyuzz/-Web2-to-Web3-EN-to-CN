第一部分：运行你自己的以太坊节点
Austin: 嘿，大家好！我是 Austin Griffith。今天我和 Carlos、Etta 在一起。今天是第二周的第三天，也是我们连续开发的第八天。

今天我们要完成关于运行脚本和 Geth 节点的内容——在庞大的点对点（P2P）网络中建立我们自己的节点。接着，我们将开始接触 Solidity。我们可能会进入 Hardhat 环境，运行本地区块链，部署并测试合约。今天将正式开启智能合约开发的初步探索。

在此之前，让我们先结清关于 Geth 的内容。之前我们写了很多脚本来连接 Infura 的端点，询问区块高度。Infura 运行着他们自己的节点，但在去中心化的世界里，我们希望尽可能地去中心化。

Austin: 最好能运行你自己的节点。看，我身后就有一个 L1 节点，它运行的是 Nethermind 客户端。它就像 Geth 节点一样，正在与全球其他节点进行点对点通信。网络中有成千上万个这样的节点，它们各自保存一份区块链副本。你可以问它任何问题：某人的余额是多少？当前区块号是多少？这比依赖 Infura 这样的第三方服务要可靠得多。

Etta，你准备好展示了吗？顺便向观众道歉，我们今天都感冒了，声音听起来可能有点沙哑。

Etta: 我已经准备好分享屏幕了。

第二部分：客户端多样性与 Geth 安装
Austin: 在以太坊中，我们常说“客户端多样性”。如果每个人都运行完全相同的软件（客户端），一旦该软件出现 Bug，整个网络都会瘫痪。所以我们需要不同的客户端（如 Geth, Nethermind, Besu 等）来保证网络韧性。

今天我们主要讲 Geth（Go-Ethereum）。它是以太坊协议的 Go 语言实现。你可以本地运行它，让它同步区块链，然后你可以查询余额、发送交易到交易池（Mempool）。

Etta: 我已经安装好了，步骤其实很简单，通常只需 brew install ethereum。现在我要打开终端开始同步。

Austin: 注意她的同步模式（Sync Mode）选的是“轻节点”（Light Node）。

存档节点（Archive Node）： 存储所有历史状态，体积巨大（数 TB），极少数人运行。

全节点（Full Node）： 验证所有交易并保留最新状态，删除不必要的历史数据。

轻节点（Light Node）： 快速同步，只下载区块头，适合本地快速上手。

Etta: 没错，轻节点同步很快。看，它已经在寻找节点（Peers）了。

第三部分：索引器（Indexer）的重要性
Austin: 这里有个重点：直接从节点读取数据有时很困难。比如你想查某个钱包的所有历史交易，你不能直接问 Geth。因为数据是按区块顺序存储的，你必须遍历每一个区块。

所以我们需要索引器（Indexer）。它是一个中间件层，预先爬取所有区块并整理好数据，让你能快速查询。不过很多索引器服务是中心化的，如果你追求 100% 的可用性，直接连接以太坊节点才是最稳妥的。

第四部分：Hardhat 环境搭建
Austin: 现在我们转向 Hardhat。它会为我们模拟一个完整的以太坊本地环境。 Carlos，交给你了。

Carlos: Hardhat 不仅仅是一个本地节点，它是一套编排软件（Orchestration Software）。它能帮你编译 Solidity、部署合约并运行测试。

我使用 npx hardhat 来初始化项目。它会生成标准的文件夹结构：

contracts/: 存放 Solidity 代码。

scripts/: 存放部署脚本。

test/: 存放单元测试。

hardhat.config.js: 核心配置文件。

Carlos: 启动 Hardhat 节点后（npx hardhat node），它会提供 10 个预设账户，每个都有 10000 ETH 的测试币。 注意： 这些账户的私钥是公开且确定的。千万不要在主网上使用这些地址！

第五部分：编写第一个智能合约 (Greeter)
Carlos: 这是一个简单的 Solidity 合约。它像是一个带有属性（Property）和方法（Function）的类。

状态变量（State Variables）： 比如 greeting，它永久存储在区块链上。

Constructor（构造函数）： 仅在部署时运行一次。

Getter/Setter： 用于读取和修改状态。

Austin: 当你在合约里修改 greeting 时，你实际上是发送了一笔交易。网络上的每个节点都会更新它们持有的那份合约状态。

第六部分：自动化测试与部署到测试网 (Rinkeby)
Carlos: Hardhat 的强大之处在于测试。我们使用 Waffle 和 Chai 编写测试脚本。我们可以模拟各种情况，比如：如果合约被“锁定”了，修改操作是否会报错（Revert）？

Austin: 在本地测完后，我们可以尝试部署到公共测试网（如 Rinkeby）。你需要：

在 hardhat.config.js 中配置网络。

使用环境变量存储你的私钥（务必放入 .gitignore！）。

运行部署脚本并指定网络。

Carlos: 成功了！我们已经在 Rinkeby 上部署了合约。虽然现在在 Etherscan 上只能看到字节码（Bytecode），但我们可以通过 Hardhat 的插件进行“合约验证”，这样别人就能在浏览器里直接看到源码并与之交互。

总结
Austin: 今天我们从运行 Geth 节点开始，到使用 Hardhat 进行本地开发、测试，最后成功部署到了测试网。 下周我们将深入 Solidity 的世界，编写更复杂的逻辑。 感谢 Etta 和 Carlos，尽管大家都在生病，但今天的演示非常成功！
